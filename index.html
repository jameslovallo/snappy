<script type="module">
	import composer from "./packages/composer/composer.js"

	const phoneIcon = `
	<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
		<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
	</svg>
`;

	const emailIcon = `
	<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
		<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
	</svg>
`;

	composer({
		component: "staff-card",
		shadow: true,

		props() {
			return {
				name: String,
				role: String,
				photo: String,
				phone: this.phoneLink,
				email: this.emailLink,
			}
		},

		phoneLink(phone) {
			if (phone) {
				const url = "tel:" + phone.match(/[0-9]+/g).join("");
				return `
					<a href="tel:${url}" title="${phone}">
						${phoneIcon}
					</a>
				`;
			} else return "";
		},

		emailLink: (email) => email ? `
			<a href="mailto:${email}" title="${email}">
				${emailIcon}
			</a>` : "",

		phoneClick(e) {
			e.preventDefault();
			const message = `Are you sure you want to call ${this.name}? Did you already try text, chat or email?`;
			alert(message);
		},

		ready() {
			this.parts.phone.on("click", this.phoneClick);
		},

		template() {
			return `
				<img part="photo" src="${this.photo}">
				<div part="details">
					<b>${this.name}</b>
					${this.role}
				</div>
				<div part="contact">
					<span part="phone">${this.phone}</span>
					<span part="email">${this.email}</span>
				</div>
			`;
		},

		styles() {
			return `
				:host {
					display: grid;
					align-items: center;
					grid-template-columns: 64px 1fr auto;
					max-width:400px;
					box-shadow: inset 0 0 0 1px rgba(123, 123, 123, 0.5);
					border-radius: .75rem;
					overflow: hidden;
				}
				[part=photo] {
					display: block;
					height: 64px;
					width: 64px;
					aspect-ratio: 1/1;
					object-fit: contain;
					object-position: center bottom;
				}
				[part=details] {
					display: flex;
					flex-direction: column;
					padding: .75rem;
				}
				[part=contact] {
					display: flex;
					gap: .75rem;
					padding: .75rem;
				}
				[part="contact"] a {
					display: block;
					text-decoration: none;
				}
				[part=contact] svg {
					display: block;
					width: 24px;
				}
			`;
		}
	});
</script>

<style>
	:root {
		font-family: sans-serif;
	}

	staff-card {
		margin-bottom: 1rem;
	}
</style>

<staff-card name="James Lovallo" role="Web Developer"
	photo="https://scontent.fdet1-2.fna.fbcdn.net/v/t1.6435-9/94033374_10158077509324788_6580222482559533056_n.jpg?_nc_cat=104&ccb=1-7&_nc_sid=09cbfe&_nc_ohc=5cg-sETIJ74AX_X-g14&_nc_ht=scontent.fdet1-2.fna&oh=00_AT_EYjyZd0VNqGXJlVBN8qfoUjH5KMUvmyZUP3ImjV-zcw&oe=63167ED7"
	phone="(810) 357-5901" email="lovallo.james@gmail.com"></staff-card>

<staff-card name="Fatimah Maimunah" role="Chief Executive Officer"
	phone="1234567890" email="#" photo="https://bit.ly/3FIADMM"></staff-card>

<staff-card name="Charlie Gardiner" role="Chief Financial Officer" email="#"
	photo="https://bit.ly/3L4nYVe"></staff-card>

<staff-card name="Ashley Fox" role="Chief Technical Officer" phone="1234567890"
	email="#" photo="https://bit.ly/3FyBTSk"></staff-card>

<staff-card name="Areeb Mcgowan" role="Chief Operations Officer" email="#"
	photo="https://bit.ly/3sv2Kts"></staff-card>